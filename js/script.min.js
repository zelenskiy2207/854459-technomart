var close=document.querySelectorAll(".modal-close");if(close)for(var i=0;i<close.length;i++)close[i].addEventListener("click",function(e){e.preventDefault();var r=this.parentNode;r.classList.remove("visible"),r.classList.remove("modal-error")});var map_opener=document.querySelector(".map-opener");map_opener&&map_opener.addEventListener("click",function(e){e.preventDefault(),document.querySelector(".modal-map").classList.add("visible")});var isStorageSupport=!0,username_stored="",email_stored="";try{username_stored=localStorage.getItem("username"),email_stored=localStorage.getItem("email")}catch(e){isStorageSupport=!1}var write_us_opener=document.querySelector(".write-us");if(write_us_opener){var write_us_modal=document.querySelector(".modal-write-us"),username=write_us_modal.querySelector("[name=name]"),email=write_us_modal.querySelector("[name=email]"),message_text=write_us_modal.querySelector("[name=message-text]"),form=write_us_modal.querySelector("form");write_us_opener.addEventListener("click",function(e){e.preventDefault(),write_us_modal.classList.add("visible"),username_stored||email_stored?(username_stored&&(username.value=username_stored,email.focus()),email_stored&&(email.value=email_stored,message_text.focus())):username.focus()}),form.addEventListener("submit",function(e){username.value&&email.value&&message_text.value?isStorageSupport&&(localStorage.setItem("username",username.value),localStorage.setItem("email",email.value)):(e.preventDefault(),write_us_modal.classList.remove("modal-error"),write_us_modal.offsetWidth=write_us_modal.offsetWidth,write_us_modal.classList.add("modal-error"),console.log("Нужно заполнить все поля"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),write_us_modal.classList.contains("visible")&&(write_us_modal.classList.remove("visible"),write_us_modal.classList.remove("modal-error")))})}var buy_openers=document.querySelectorAll(".catalog-item-buy");if(buy_openers)for(i=0;i<buy_openers.length;i++)buy_openers[i].addEventListener("click",function(e){e.preventDefault(),document.querySelector(".modal-added-to-cart").classList.add("visible")});
